var mongoose = require('mongoose');
var Models = require('../models');
var Chance = require('chance');
var Samples = require('./samples');

var generator = function() {
  var chance = new Chance();
  var newPreference = {};
  
  var code, title, enabled, selected;
  
  var preferences = Samples.PREFERENCES_LIST;
  
  for (var i = 0; i < preferences.length; i++) {
    code = chance.string(Samples.CODE_PATTERN);
    title = preferences[i];
    
    // New preference generation
    newPreference = new Models.Preference({
      'code': code,        
      'title': title,
      'enabled': chance.bool(),
      'selected': chance.bool()
    });

    newPreference.save(function(err, preference) {
      if (err) return console.log(err);
      console.log('Preference ' + preference.title + ' saved !');
    });
  }
}

var Preferences = {
  generator: generator
}

module.exports = Preferences;