var mongoose = require('mongoose');
var Models = require('../models');
var Chance = require('chance');
var Samples = require('./samples');

var generator = function() {
  var chance = new Chance();
  var newVilla = {};

  var codeVilla, numberVilla, maxVilla, selected;

  // villas generation
  var villas = [];
  nbVillas = chance.integer({
    min: 1,
    max: 4
  });
  for (j = 0; j <= nbVillas; j++) {
    codeVilla = chance.string(Samples.CODE_PATTERN);
    numberVilla = chance.integer({
      min: 200,
      max: 500
    });
    maxVilla = chance.integer({
      min: 1,
      max: 5
    });
    // New villa generation
    newVilla = new Models.Villa({
      'code': codeVilla,
      'label': numberVilla,
      'max': maxVilla,
      'selected': false
    });

    newVilla.save(function(err, villa) {
      if (err) return console.log(err);
      console.log('Villa ' + villa.code + ' saved !');
    });
  }
}

var Villas = {
  generator: generator
}

module.exports = Villas;